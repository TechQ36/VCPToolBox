# VCP 工具调用格式指南（给人看）

> 本文档为人用参考，整理当前**可用**工具的调用格式。AI 侧格式由各插件 manifest 的 `invocationCommands.description` 注入，无需把本文档塞进系统提示。  
> 已废弃工具（FluxGen、QwenImageGen、Wan2.1VideoGen）已移至 `Plugin_Deprecated`，此处不再列出。

---

## 一、通用格式

一次完整调用用 `<<<[TOOL_REQUEST]>>>` 到 `<<<[END_TOOL_REQUEST]>>>` 包裹，参数用「始」「末」包裹以兼容富文本。

```
<<<[TOOL_REQUEST]>>>
tool_name:「始」插件名「末」,
参数名:「始」参数值「末」,
...
<<<[END_TOOL_REQUEST]>>>
```

可选：`maid:「始」署名「末」` 用于任务追踪；`timely_contact:「始」YYYY-MM-DD-HH:mm「末」` 可设置定时调用。

---

## 二、多媒体生成（当前可用）

### 1. KolorsGen（免费文生图，推荐）

- 模型：Kwai-Kolors/Kolors（SiliconFlow 免费）
- 调用示例：
```
tool_name:「始」KolorsGen「末」,
prompt:「始」一只橘猫在阳光下打盹「末」,
resolution:「始」1024x1024「末」
```
- 分辨率可选：`1024x1024`、`960x1280`、`768x1024`、`720x1440`、`720x1280`。可选 `seed:「始」整数「末」`。

### 2. 其他生图（按需配置）

- **DoubaoGen**：豆包文生图，支持中文提示词、任意分辨率。
- **ComfyUIGen**：ComfyUI 工作流生图。
- **GeminiImageGen / WebUIGen / NovelAIGen / NanoBananaGen2 等**：见各插件 manifest 或管理面板中的描述。

### 3. SunoGen（音乐生成）

- `tool_name:「始」SunoGen「末」`，`command:「始」generate_song「末」`，`prompt`/`tags`/`title` 等见插件说明。

---

## 三、工具类

### 1. SciCalculator（科学计算器）

```
tool_name:「始」SciCalculator「末」,
expression:「始」完整数学表达式「末」
```
- 支持：四则运算、乘方、整除、取模、pi/e、三角函数、sqrt/log/exp、统计、定积分/不定积分、误差传递、置信区间等（见插件描述）。

### 2. 联网搜索

- **VSearch**：`tool_name:「始」VSearch「末」`，语义并发搜索。
- **TavilySearch**：`tool_name:「始」TavilySearch「末」`，`query:「始」关键词「末」`，可选 `topic`/`search_depth`/`max_results`。
- **GoogleSearch / SerpSearch**：见各插件说明。

### 3. 网页抓取

- **UrlFetch**：`tool_name:「始」UrlFetch「末」`，`url:「始」URL「末」`，可选 `mode:「始」text「末」` 或 `snapshot「末」`。
- **BilibiliFetch**：`tool_name:「始」BilibiliFetch「末」`，`url:「始」B站视频/直播 URL「末」`。

### 4. 文件管理（ServerFileOperator）

- **注意**：插件 manifest 的 name 为 **ServerFileOperator**，调用时 `tool_name` 应为 **ServerFileOperator**（若文档中写 FileOperator 需改为 ServerFileOperator）。
- 常用：`ListAllowedDirectories`、`ReadFile`、`WriteFile`、`AppendFile`、`EditFile`、`ListDirectory`、`FileInfo`、`CopyFile`、`MoveFile`、`RenameFile` 等，详见 `TVStxt/filetool.txt`。

### 5. 本地文件搜索（ServerSearchController）

- 对应插件 VCPEverything，manifest name 为 **ServerSearchController**。
- `tool_name:「始」ServerSearchController「末」`，`command:「始」search「末」`，`query:「始」关键词「末」`，`maxResults:「始」50「末」`。

### 6. 塔罗占卜（TarotDivination）

- `tool_name:「始」TarotDivination「末」`，`command:「始」draw_single_card「末」` / `draw_three_card_spread「末」` / `draw_celtic_cross「末」`，可选 `fate_check_number`。

---

## 四、日记与回忆

### 1. DailyNote（日记创建/更新/检索）

- 创建/更新日记、按日期/标签检索等，见插件 manifest 描述。

### 2. LightMemo（轻量回忆 / RAG 检索）

- 在 RAG 知识库（日记）中搜索。
- `tool_name:「始」LightMemo「末」`，`query:「始」查询内容「末」`，可选 `maid`/`folder`/`k`/`rerank`/`search_all_knowledge_bases`/`tag_boost`。

---

## 五、通讯与协作

### 1. AgentAssistant（联络其他 Agent）

- `tool_name:「始」AgentAssistant「末」`，`agent_name:「始」Agent 名称「末」`，`prompt:「始」内容「末」`。

### 2. AgentMessage（向用户推送消息）

- `tool_name:「始」AgentMessage「末」`，`message:「始」通知内容「末」`。

### 3. VCPForum（论坛发帖/回帖）

- `tool_name:「始」VCPForum「末」`，`command:「始」CreatePost「末」` 或 `ReplyPost「末」`，`maid`/`board`/`title`/`content` 或 `post_uid`/`content` 等。

---

## 六、随机与娱乐（Randomness）

- 掷骰：`command:「始」rollDice「末」`，`diceString:「始」2d6+5「末」`。
- 抽牌：`command:「始」getCards「末」`，`deckName:「始」poker「末」` 或 `tarot「末」`，`count:「始」2「末」`。
- 塔罗牌阵：`command:「始」drawTarot「末」`，`spread:「始」three_card「末」` 等。
- 列表随机选：`command:「始」selectFromList「末」`，`items:「始」["A","B"]「末」`。
- 有状态牌堆：`createDeck` / `drawFromDeck` / `destroyDeck` 等，见插件描述。

---

## 七、已废弃（勿再使用）

- **FluxGen**、**QwenImageGen**、**Wan2.1VideoGen**：已迁至 `Plugin_Deprecated`，manifest 已无 entryPoint，不会被加载。生图请用 **KolorsGen** 或其他当前可用插件。

---

## 八、toollist 与 VarToolList

- AI 实际拿到的“每个工具怎么调”来自各插件 **manifest 的 invocationCommands.description**（通过 `{{VCPXXX}}` 展开），不是本文档。
- 在 `TVStxt/toollist.txt` 中只列需要的占位符（如 `{{VCPKolorsGen}} {{VCPSciCalculator}}`），config 中设 `VarToolList=toollist.txt` 即可。
- 分类与占位符一览见 **用户参考文档/工具列表说明.md**。
